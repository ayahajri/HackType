<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HackType - Terminal Typing Challenge</title>
    <link rel="website icon" type="png" href="malware.png">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: transparent;
        }
        
        ::-webkit-scrollbar-thumb {
            background: rgba(51, 255, 51, 0.3);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: rgba(51, 255, 51, 0.5);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Courier New', monospace;
        }

        body {
            background-color: #0a0a0a;
            color: #33ff33;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
            line-height: 1.6;
            transition: all 0.5s ease;
        }

        /* Background videos */
        .background-video {
            position: fixed;
            top: 0;
            left: 0;
            min-width: 100%;
            min-height: 100%;
            z-index: -3;
            object-fit: cover;
            opacity: 0.5;
            display: none;
        }
        
        /* GLITCH EFFECT CLASSES */
        .glitch {
            animation: glitch-effect 0.3s infinite;
        }
        
        @keyframes glitch-effect {
            0% { filter: hue-rotate(0deg); transform: translate(0); }
            20% { transform: translate(-5px, 5px); }
            40% { transform: translate(-5px, -5px); }
            60% { transform: translate(5px, 5px); }
            80% { transform: translate(5px, -5px); }
            100% { filter: hue-rotate(360deg); transform: translate(0); }
        }
        
        .red-glow {
            color: #ff3333 !important;
            text-shadow: 0 0 10px #ff3333, 0 0 20px #ff3333;
        }
        
        .green-glow {
            color: #33ff33 !important;
            text-shadow: 0 0 10px #33ff33, 0 0 20px #33ff33;
        }
        
        .terminal-warning {
            background: linear-gradient(45deg, #200000, #400000, #200000) !important;
            color: #ff3333 !important;
            border-color: #ff3333 !important;
            box-shadow: 0 0 15px rgba(255, 51, 51, 0.5), inset 0 0 10px rgba(255, 0, 0, 0.3);
        }
        
        .terminal-success {
            background: linear-gradient(45deg, #002000, #004000, #002000) !important;
            color: #33ff33 !important;
            border-color: #33ff33 !important;
            box-shadow: 0 0 15px rgba(51, 255, 51, 0.5), inset 0 0 10px rgba(0, 255, 0, 0.3);
        }
        
        .terminal-warning .terminal-line {
            background: linear-gradient(90deg, transparent, #ff3333, transparent) !important;
            animation: warning-scan 3s linear infinite !important;
        }
        
        .terminal-success .terminal-line {
            background: linear-gradient(90deg, transparent, #33ff33, transparent) !important;
            animation: warning-scan 3s linear infinite !important;
        }
        
        .terminal-warning .binary-code {
            color: #ff3333 !important;
        }
        
        .terminal-success .binary-code {
            color: #33ff33 !important;
        }
        
        .terminal-warning .logo {
            color: #ff3333 !important;
        }
        
        .terminal-success .logo {
            color: #33ff33 !important;
        }
        
        .terminal-warning .logo::after {
            background: linear-gradient(90deg, transparent, rgba(255, 51, 51, 0.3), transparent) !important;
        }
        
        .terminal-success .logo::after {
            background: linear-gradient(90deg, transparent, rgba(51, 255, 51, 0.3), transparent) !important;
        }
        
        .terminal-warning .text-display span.correct {
            color: #ff3333 !important;
        }
        
        .terminal-success .text-display span.correct {
            color: #33ff33 !important;
        }
        
        .terminal-warning .btn {
            border-color: #ff3333 !important;
            color: #ff3333 !important;
        }
        
        .terminal-success .btn {
            border-color: #33ff33 !important;
            color: #33ff33 !important;
        }
        
        .terminal-warning .btn:hover {
            background-color: rgba(255, 51, 51, 0.1) !important;
            box-shadow: 0 0 15px rgba(255, 51, 51, 0.5) !important;
        }
        
        .terminal-success .btn:hover {
            background-color: rgba(51, 255, 51, 0.1) !important;
            box-shadow: 0 0 15px rgba(51, 255, 51, 0.5) !important;
        }
        
        .terminal-warning .mission-btn.active {
            background: rgba(255, 51, 51, 0.2) !important;
            border-color: #ff3333 !important;
        }
        
        .terminal-success .mission-btn.active {
            background: rgba(51, 255, 51, 0.2) !important;
            border-color: #33ff33 !important;
        }
        
        .terminal-warning .stat-value {
            color: #ff3333 !important;
        }
        
        .terminal-success .stat-value {
            color: #33ff33 !important;
        }
        
        @keyframes warning-scan {
            0% { top: 0%; }
            100% { top: 100%; }
        }

        body::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(20, 50, 20, 0.1) 0%, transparent 25%),
                radial-gradient(circle at 90% 80%, rgba(20, 50, 20, 0.1) 0%, transparent 25%);
            z-index: -4;
        }

        .terminal-line {
            position: absolute;
            height: 1px;
            background: linear-gradient(90deg, transparent, #33ff33, transparent);
            width: 100%;
            animation: scan 8s linear infinite;
            z-index: -1;
        }

        @keyframes scan {
            0% { top: 0%; }
            100% { top: 100%; }
        }
        
        .binary-code {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.1;
            font-size: 14px;
            color: #33ff33;
            pointer-events: none;
            overflow: hidden;
            z-index: -1;
        }
        
        .binary-line {
            position: absolute;
            white-space: nowrap;
            animation: binary-fall 15s linear infinite;
        }
        
        @keyframes binary-fall {
            0% { transform: translateY(-100%); }
            100% { transform: translateY(100vh); }
        }
        
        /* Header */
        header {
            padding: 0.5rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #33ff3350;
            position: fixed;
            width: 100%;
            background: rgba(10, 10, 10, 0.95);
            z-index: 100;
            top: 0;
            transition: all 0.3s ease;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            letter-spacing: 2px;
            color: #33ff33;
            cursor: default;
            position: relative;
            overflow: hidden;
            transition: color 0.3s ease;
        }
        
        .logo::after {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(51, 255, 51, 0.3), transparent);
            transition: 0.5s;
        }
        
        .logo:hover::after {
            left: 100%;
        }

        .logo span {
            color: #88ff88;
        }
        
        /* Main Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 120px 20px 50px;
            min-height: 100vh;
            position: relative;
            z-index: 10;
        }
        
        .hero {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .terminal-text {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            position: relative;
            overflow: hidden;
            white-space: nowrap;
            border-right: 4px solid #33ff33;
            max-width: max-content;
            margin: 0 auto 20px;
            animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
        }

        @keyframes typing {
            from { width: 0; }
            to { width: 100%; }
        }

        @keyframes blink-caret {
            from, to { border-color: transparent }
            50% { border-color: #33ff33; }
        }

        .sub-text {
            font-size: 1.5rem;
            margin-bottom: 3rem;
            color: #88ff88;
            opacity: 0;
            animation: fadeIn 2s forwards 3s;
            max-width: 800px;
            margin: 0 auto;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }
        
        /* Typing Test Interface */
        .typing-interface {
            background: rgba(20, 40, 20, 0.3);
            padding: 30px;
            border-radius: 10px;
            border: 1px solid #33ff3330;
            max-width: 900px;
            margin: 0 auto;
            transition: all 0.5s ease;
        }
        
        .stats-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            padding: 10px;
            background: rgba(0, 0, 0, 0.2);
            border-radius: 5px;
        }
        
        .stat {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #33ff33;
            transition: color 0.5s ease;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #88ff88;
        }
        
        .text-display {
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #33ff3330;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 25px;
            min-height: 150px;
            font-size: 1.4rem;
            line-height: 2;
        }
        
        .text-display span.correct {
            color: #33ff33;
        }
        
        .text-display span.incorrect {
            color: #ff3333;
            background: rgba(255, 0, 0, 0.1);
            text-decoration: underline;
        }
        
        .text-display span.active {
            background: rgba(51, 255, 51, 0.2);
            text-decoration: underline;
        }
        
        .input-area {
            width: 100%;
            background: rgba(0, 0, 0, 0.3);
            border: 1px solid #33ff3330;
            border-radius: 5px;
            padding: 15px;
            font-size: 1.2rem;
            color: #88ff88;
            resize: none;
            height: 120px;
            display: none; /* Hidden until start */
        }
        
        .input-area:focus {
            outline: none;
            border-color: #33ff33;
            box-shadow: 0 0 10px rgba(51, 255, 51, 0.3);
        }
        
        .controls {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .btn {
            display: inline-block;
            background: transparent;
            color: #33ff33;
            border: 2px solid #33ff33;
            padding: 12px 30px;
            font-size: 1.1rem;
            cursor: pointer;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            letter-spacing: 1px;
            font-weight: bold;
            text-align: center;
            text-decoration: none;
            flex: 1;
        }
        
        .btn:hover {
            background-color: rgba(51, 255, 51, 0.1);
            box-shadow: 0 0 15px rgba(51, 255, 51, 0.5);
        }
        
        .btn-primary {
            background: rgba(51, 255, 51, 0.1);
        }
        
        .btn-finish {
            background: rgba(255, 204, 0, 0.1);
            border-color: #ffcc00;
            color: #ffcc00;
            display: none;
        }
        
        .btn-finish:hover {
            background-color: rgba(255, 204, 0, 0.2);
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.5);
        }
        
        /* Start Button */
        .start-btn-container {
            text-align: center;
            margin-top: 20px;
        }
        
        #startBtn {
            padding: 15px 50px;
            font-size: 1.5rem;
            background: rgba(51, 255, 51, 0.2);
            border: 3px solid #33ff33;
            box-shadow: 0 0 20px rgba(51, 255, 51, 0.4);
            animation: pulse 2s infinite;
        }
        
        #startBtn:hover {
            background: rgba(51, 255, 51, 0.3);
            transform: scale(1.05);
        }
        
        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(51, 255, 51, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(51, 255, 51, 0); }
            100% { box-shadow: 0 0 0 0 rgba(51, 255, 51, 0); }
        }
        
        /* Mission Selector */
        .mission-selector {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .mission-btn {
            background: rgba(20, 40, 20, 0.3);
            border: 1px solid #33ff3330;
            color: #88ff88;
            padding: 10px 20px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .mission-btn:hover, .mission-btn.active {
            background: rgba(51, 255, 51, 0.2);
            border-color: #33ff33;
        }
        
        /* Results Screen */
        .results-screen {
            background: rgba(20, 40, 20, 0.3);
            padding: 30px;
            border-radius: 10px;
            border: 1px solid #33ff3330;
            margin-top: 30px;
            text-align: center;
        }
        
        .results-title {
            font-size: 2rem;
            color: #33ff33;
            margin-bottom: 20px;
        }
        
        .hacker-rank {
            font-size: 1.8rem;
            margin-bottom: 30px;
            color: #88ff88;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-box {
            background: rgba(51, 255, 51, 0.1);
            padding: 20px;
            border-radius: 5px;
        }
        
        .stat-box-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #33ff33;
            margin-bottom: 10px;
        }
        
        .stat-box-label {
            font-size: 1.1rem;
            color: #88ff88;
        }
        
        /* Footer */
        footer {
            padding: 2.5rem;
            text-align: center;
            border-top: 1px solid #33ff3330;
            font-size: 1rem;
            color: #88ff88;
            margin-top: 50px;
            position: relative;
            z-index: 10;
        }
           
        /* Game Over Screen */
        .game-over-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            backdrop-filter: blur(5px);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
        }
        
        .game-over-screen.active {
            opacity: 1;
            pointer-events: all;
        }
        
        /* Enhanced Glitch Effect */
        .glitch-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 1001;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.5s ease;
        }
        
        .glitch-overlay.active {
            opacity: 1;
            pointer-events: all;
        }
        
        .glitch-text {
            font-size: 4rem;
            text-align: center;
            position: relative;
            color: #ff3333;
            text-transform: uppercase;
            letter-spacing: 5px;
            text-shadow: 0 0 20px #ff3333, 0 0 40px #ff3333;
            animation: glitch-anim 0.3s infinite;
        }
        
        .glitch-text.success {
            color: #33ff33;
            text-shadow: 0 0 20px #33ff33, 0 0 40px #33ff33;
        }
        
        .glitch-text::before,
        .glitch-text::after {
            content: attr(data-text);
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        
        .glitch-text::before {
            left: 2px;
            text-shadow: -2px 0 #ff00ff;
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim 1s infinite linear alternate-reverse;
        }
        
        .glitch-text.success::before {
            text-shadow: -2px 0 #00ff00;
        }
        
        .glitch-text::after {
            left: -2px;
            text-shadow: -2px 0 #00ffff;
            clip: rect(44px, 450px, 56px, 0);
            animation: glitch-anim 1.5s infinite linear alternate-reverse;
        }
        
        .glitch-text.success::after {
            text-shadow: -2px 0 #00ffff;
        }
        
        @keyframes glitch-anim {
            0% { clip: rect(55px, 9999px, 33px, 0); }
            20% { clip: rect(25px, 9999px, 99px, 0); }
            40% { clip: rect(66px, 9999px, 22px, 0); }
            60% { clip: rect(44px, 9999px, 77px, 0); }
            80% { clip: rect(11px, 9999px, 88px, 0); }
            100% { clip: rect(99px, 9999px, 12px, 0); }
        }
        
        .game-over-message {
            font-size: 2rem;
            color: #fff;
            text-align: center;
            max-width: 800px;
            margin: 0 auto 3rem;
            line-height: 1.6;
            position: relative;
            z-index: 10;
            text-shadow: 0 0 10px rgba(255, 51, 51, 0.7);
            background: rgba(0, 0, 0, 0.7);
            padding: 20px;
            border-radius: 10px;
        }
        
        .continue-btn {
            background: rgba(255, 51, 51, 0.2);
            border: 2px solid #ff3333;
            color: #ff3333;
            padding: 15px 40px;
            font-size: 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            letter-spacing: 2px;
            font-weight: bold;
            box-shadow: 0 0 15px rgba(255, 51, 51, 0.5);
            z-index: 10;
        }
        
        .continue-btn.success {
            background: rgba(51, 255, 51, 0.2);
            border: 2px solid #33ff33;
            color: #33ff33;
            box-shadow: 0 0 15px rgba(51, 255, 51, 0.5);
        }
        
        .continue-btn:hover {
            background: rgba(255, 51, 51, 0.3);
            transform: scale(1.05);
            box-shadow: 0 0 25px rgba(255, 51, 51, 0.7);
        }
        
        .continue-btn.success:hover {
            background: rgba(51, 255, 51, 0.3);
            box-shadow: 0 0 25px rgba(51, 255, 51, 0.7);
        }
        
        .game-over-binary {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.3;
            font-size: 14px;
            color: #33ff33;
            pointer-events: none;
            overflow: hidden;
            z-index: 5;
        }
        
        /* Matrix Effect */
        .matrix-effect {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0.15;
            z-index: 1;
            pointer-events: none;
        }
        
        .matrix-column {
            position: absolute;
            top: -50px;
            font-size: 18px;
            writing-mode: vertical-lr;
            text-orientation: upright;
            color: #33ff33;
            opacity: 0.8;
            animation: matrix-fall linear infinite;
        }
        
        @keyframes matrix-fall {
            to { transform: translateY(100vh); }
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .terminal-text {
                font-size: 2.2rem;
            }
            
            .sub-text {
                font-size: 1.1rem;
            }
            
            .stats-bar {
                flex-direction: column;
                gap: 10px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
            }
            
            .text-display {
                font-size: 1.2rem;
            }
            
            .mission-btn {
                padding: 8px 15px;
                font-size: 0.9rem;
            }
            
            .glitch-text {
                font-size: 2.5rem;
            }
            
            .game-over-message {
                font-size: 1.5rem;
            }
            
            .controls {
                flex-wrap: wrap;
            }
            
            .controls .btn {
                flex: 1 0 45%;
                margin-bottom: 10px;
            }
        }
        
        /* Animations */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        .hidden {
            display: none;
        }
        
        .cursor {
            display: inline-block;
            width: 10px;
            height: 1.5rem;
            background-color: #33ff33;
            margin-left: 5px;
            animation: blink 1s infinite;
            vertical-align: middle;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }
    </style>
</head>
<body>
    <div class="terminal-line"></div>
    <div class="binary-code" id="binaryCode"></div>
    
    <!-- Background Videos -->
    <video id="successVideo" class="background-video" muted loop>
        <source src="succ.mp4" type="video/mp4">
        Votre navigateur ne supporte pas la balise vidéo.
    </video>
    
    <video id="failureVideo" class="background-video" muted loop>
        <source src="error.mp4" type="video/mp4">
        Votre navigateur ne supporte pas la balise vidéo.
    </video>
    
    <!-- Header -->
    <header>
        <div class="logo">HACK<span>TYPE</span></div>
    </header>
    
    <div class="container">
        <div class="hero">
            <h1 class="terminal-text">TERMINAL TYPING CHALLENGE</h1>
            <p class="sub-text">// Complete missions to improve your hacking speed and accuracy</p>
        </div>
        
        <!-- Mission Selector -->
        <div class="mission-selector">
            <div class="mission-btn active" data-mission="1">PASSWORD CRACK</div>
            <div class="mission-btn" data-mission="2">DATABASE BREACH</div>
            <div class="mission-btn" data-mission="3">SERVER OVERRIDE</div>
            <div class="mission-btn" data-mission="4">FIREWALL BYPASS</div>
        </div>
        
        <!-- Typing Test Interface -->
        <div class="typing-interface" id="typingInterface">
            <div class="stats-bar">
                <div class="stat">
                    <div class="stat-value" id="wpm">0</div>
                    <div class="stat-label">WPM</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="accuracy">100%</div>
                    <div class="stat-label">ACCURACY</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="timer">60</div>
                    <div class="stat-label">TIME LEFT</div>
                </div>
                <div class="stat">
                    <div class="stat-value" id="errors">0</div>
                    <div class="stat-label">ERRORS</div>
                </div>
            </div>
            
            <div class="text-display" id="textDisplay">
                <!-- Text will be injected here by JavaScript -->
            </div>
            
            <div class="start-btn-container">
                <button class="btn btn-primary" id="startBtn">START MISSION</button>
            </div>
            
            <textarea class="input-area" id="typingInput" placeholder="Start typing here to begin the mission..."></textarea>
            
            <div class="controls">
                <button class="btn" id="restartBtn">RESTART</button>
                <button class="btn btn-finish" id="finishBtn">TERMINER LA MISSION</button>
                <button class="btn btn-primary" id="newMissionBtn">NEW MISSION</button>
            </div>
        </div>
        
        <!-- Results Screen -->
        <div class="results-screen hidden" id="resultsScreen">
            <h2 class="results-title">MISSION COMPLETE</h2>
            <p class="hacker-rank">SECURITY LEVEL BREACHED: <span id="hackerRank">ELITE HACKER</span></p>
            
            <div class="stats-grid">
                <div class="stat-box">
                    <div class="stat-box-value" id="wpmResult">0</div>
                    <div class="stat-box-label">WORDS PER MINUTE</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-value" id="accuracyResult">0%</div>
                    <div class="stat-box-label">ACCURACY</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-value" id="timeResult">0s</div>
                    <div class="stat-box-label">TIME</div>
                </div>
                <div class="stat-box">
                    <div class="stat-box-value" id="errorsResult">0</div>
                    <div class="stat-box-label">ERRORS</div>
                </div>
            </div>
            
            <button class="btn btn-primary" id="tryAgainBtn">TRY ANOTHER MISSION</button>
        </div>
    </div>
    
    <!-- Game Over Screen -->
    <div class="game-over-screen" id="gameOverScreen">
        <div class="glitch-overlay" id="glitchOverlay">
            <div class="glitch-text" data-text="GAME OVER">GAME OVER</div>
        <div class="game-over-binary" id="gameOverBinary"></div>
        <div class="matrix-effect" id="matrixEffect"></div>
        
        <p class="game-over-message" id="gameOverMessage"></p>
        <button class="continue-btn" id="continueBtn">CONTINUE</button>            
        </div>
    </div>
    
    <footer>
        <p>© 2025 HACKTYPE - Terminal Typing Challenge</p>
        <p>Improve your typing skills through immersive hacking missions</p>
    </footer>
    
    <script>
        // Mission data
        const missions = {
            1: {
                title: "Password Cracking",
                text: "To gain access to the mainframe, you must crack the encrypted password. Type: 7h!5 !5 @ c0mpl3x p@$$w0rd. Be precise - one mistake could lock you out permanently.",
                time: 60
            },
            2: {
                title: "Database Breach",
                text: "You've found a vulnerability in the SQL database. Execute these commands to extract sensitive data: SELECT * FROM users WHERE admin=1; DROP TABLE audit_log; -- This will remove traces of your access. Be precise with your typing - one wrong character could lock you out permanently. The security team is actively monitoring so complete this within 60 seconds.",
                time: 60
            },
            3: {
                title: "Server Override",
                text: "The main server requires complex command input to override its security measures. Type: #!/bin/bash\nfor i in {1..10}; do\n  echo 'Overwriting sector $i'\n  dd if=/dev/zero of=/dev/sda bs=1M count=100\n  sleep 1\ndone\nrm -f /var/log/auth.log. This script will erase critical logs and create chaos in the system. Accuracy is paramount - one mistake could crash the entire operation.",
                time: 90
            },
            4: {
                title: "Firewall Bypass",
                text: "The corporate firewall uses advanced encryption. Decrypt and enter this sequence: 7h!5 !5 @ c0mpl3x 3ncryp710n k3y. Brute force won't work here - you must type the decrypted text perfectly. The system will lock down after 45 seconds, so work quickly but accurately. Success will grant you full network access.",
                time: 45
            }
        };
        
        // DOM Elements
        const textDisplay = document.getElementById('textDisplay');
        const typingInput = document.getElementById('typingInput');
        const timerElement = document.getElementById('timer');
        const wpmElement = document.getElementById('wpm');
        const accuracyElement = document.getElementById('accuracy');
        const errorsElement = document.getElementById('errors');
        const restartBtn = document.getElementById('restartBtn');
        const newMissionBtn = document.getElementById('newMissionBtn');
        const finishBtn = document.getElementById('finishBtn');
        const resultsScreen = document.getElementById('resultsScreen');
        const wpmResult = document.getElementById('wpmResult');
        const accuracyResult = document.getElementById('accuracyResult');
        const timeResult = document.getElementById('timeResult');
        const errorsResult = document.getElementById('errorsResult');
        const hackerRank = document.getElementById('hackerRank');
        const tryAgainBtn = document.getElementById('tryAgainBtn');
        const missionButtons = document.querySelectorAll('.mission-btn');
        const startBtn = document.getElementById('startBtn');
        const gameOverScreen = document.getElementById('gameOverScreen');
        const gameOverMessage = document.getElementById('gameOverMessage');
        const continueBtn = document.getElementById('continueBtn');
        const gameOverBinary = document.getElementById('gameOverBinary');
        const matrixEffect = document.getElementById('matrixEffect');
        const glitchOverlay = document.getElementById('glitchOverlay');
        const successVideo = document.getElementById('successVideo');
        const failureVideo = document.getElementById('failureVideo');
        const glitchText = document.querySelector('.glitch-text');

        // Game state
        let currentMissionId = 1;
        let timer = null;
        let timeLeft = 0;
        let startTime = 0;
        let endTime = 0;
        let errors = 0;
        let totalChars = 0;
        let correctChars = 0;
        let wpmInterval = null;
        let isTestActive = false;
        let warningActive = false;

        // Initialize
        missionButtons.forEach(button => {
            button.addEventListener('click', function() {
                missionButtons.forEach(btn => btn.classList.remove('active'));
                this.classList.add('active');
                currentMissionId = parseInt(this.getAttribute('data-mission'));
                startMission(currentMissionId);
            });
        });
        
        restartBtn.addEventListener('click', restartMission);
        newMissionBtn.addEventListener('click', () => {
            missionButtons.forEach(btn => btn.classList.remove('active'));
            document.querySelector(`.mission-btn[data-mission="${currentMissionId}"]`).classList.add('active');
            startMission(currentMissionId);
        });
        
        finishBtn.addEventListener('click', function() {
            // Only allow finishing if the test is active
            if (isTestActive) {
                endMission();
            }
        });
        
        tryAgainBtn.addEventListener('click', () => {
            resultsScreen.classList.add('hidden');
            startMission(currentMissionId);
        });
        
        typingInput.addEventListener('input', handleTyping);
        startBtn.addEventListener('click', startTest);
        continueBtn.addEventListener('click', () => {
            gameOverScreen.classList.remove('active');
            resultsScreen.classList.remove('hidden');
            glitchOverlay.classList.remove('active');
        });

        // Video control functions
        function showSuccessVideo() {
            hideVideos();
            successVideo.style.display = 'block';
            try {
                successVideo.play().catch(e => console.log("Video play error:", e));
            } catch (e) {
                console.log("Video play error:", e);
            }
            document.body.classList.remove('terminal-warning');
            document.body.classList.add('terminal-success');
        }
        
        function showFailureVideo() {
            hideVideos();
            failureVideo.style.display = 'block';
            try {
                failureVideo.play().catch(e => console.log("Video play error:", e));
            } catch (e) {
                console.log("Video play error:", e);
            }
            document.body.classList.remove('terminal-success');
            document.body.classList.add('terminal-warning');
        }
        
        function hideVideos() {
            successVideo.style.display = 'none';
            failureVideo.style.display = 'none';
            try {
                successVideo.pause();
                failureVideo.pause();
            } catch (e) {
                console.log("Video pause error:", e);
            }
        }

        // Generate binary background
        function generateBinary(container, lines) {
            container.innerHTML = '';
            
            for (let i = 0; i < lines; i++) {
                const binaryLine = document.createElement('div');
                binaryLine.classList.add('binary-line');
                
                let binaryString = '';
                const length = Math.floor(window.innerWidth / 10);
                for (let j = 0; j < length; j++) {
                    binaryString += Math.random() > 0.5 ? '1' : '0';
                    binaryString += ' ';
                }
                
                binaryLine.textContent = binaryString;
                binaryLine.style.left = `${Math.random() * 100}%`;
                binaryLine.style.animationDelay = `${Math.random() * 10}s`;
                container.appendChild(binaryLine);
            }
        }
        
        // Generate Matrix effect
        function generateMatrixEffect() {
            const chars = "01!@#$%^&*()_+-=[]{}|;:,.<>?/";
            const columns = Math.floor(window.innerWidth / 20);
            
            for (let i = 0; i < columns; i++) {
                const column = document.createElement('div');
                column.classList.add('matrix-column');
                column.style.left = `${(i / columns) * 100}%`;
                column.style.animationDuration = `${Math.random() * 5 + 5}s`;
                column.style.animationDelay = `${Math.random() * 5}s`;
                
                // Generate random characters
                let charString = '';
                const charCount = 30;
                for (let j = 0; j < charCount; j++) {
                    charString += chars.charAt(Math.floor(Math.random() * chars.length));
                }
                
                column.textContent = charString;
                matrixEffect.appendChild(column);
            }
        }
        
        // Initialize effects
        generateBinary(document.getElementById('binaryCode'), Math.floor(window.innerHeight / 20));
        generateMatrixEffect();
        
        // Mission functions
        function startMission(missionId) {
            currentMissionId = missionId;
            const mission = missions[missionId];
            
            resultsScreen.classList.add('hidden');
            gameOverScreen.classList.remove('active');
            glitchOverlay.classList.remove('active');
            typingInput.disabled = false;
            typingInput.value = '';
            typingInput.style.display = 'none'; // Hide input area
            startBtn.style.display = 'block'; // Show start button
            finishBtn.style.display = 'none'; // Hide finish button
            
            textDisplay.innerHTML = '';
            
            // Hide videos and reset warning state
            hideVideos();
            warningActive = false;
            document.body.classList.remove('terminal-warning');
            document.body.classList.remove('terminal-success');
            
            // Split text into characters
            mission.text.split('').forEach(char => {
                const charSpan = document.createElement('span');
                charSpan.innerText = char;
                textDisplay.appendChild(charSpan);
            });
            
            timeLeft = mission.time;
            timerElement.textContent = timeLeft;
            
            errors = 0;
            totalChars = 0;
            correctChars = 0;
            startTime = 0;
            isTestActive = false;
            
            wpmElement.textContent = "0";
            accuracyElement.textContent = "100%";
            errorsElement.textContent = "0";
            
            // Reset timer
            if (timer) clearInterval(timer);
            if (wpmInterval) clearInterval(wpmInterval);
        }
        
        function startTest() {
            if (isTestActive) return;
            
            // Hide start button and show typing input
            startBtn.style.display = 'none';
            typingInput.style.display = 'block';
            finishBtn.style.display = 'block'; // Show finish button
            typingInput.focus();
            
            isTestActive = true;
            startTime = new Date();
            
            // Start timer
            timer = setInterval(() => {
                timeLeft--;
                timerElement.textContent = timeLeft;
                
                // Apply warning effect when time is running out
                if (timeLeft <= 10 && !warningActive) {
                    document.body.classList.add('terminal-warning');
                    warningActive = true;
                    
                    // Add pulsing effect to timer
                    timerElement.classList.add('red-glow');
                    
                    // Play warning sound
                    playWarningSound();
                }
                
                if (timeLeft <= 0) {
                    endMission();
                }
            }, 1000);
            
            // Start WPM tracking
            wpmInterval = setInterval(updateWPM, 1000);
        }
        
        function playWarningSound() {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const oscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                oscillator.type = 'sawtooth';
                oscillator.frequency.setValueAtTime(220, audioContext.currentTime);
                oscillator.frequency.exponentialRampToValueAtTime(440, audioContext.currentTime + 0.5);
                
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.5);
                
                oscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                oscillator.start();
                oscillator.stop(audioContext.currentTime + 0.5);
            } catch (e) {
                console.log("Audio context not supported");
            }
        }
        
        function updateWPM() {
            if (!startTime || totalChars === 0) return;
            
            const timeTaken = (new Date() - startTime) / 1000;
            const minutes = timeTaken / 60;
            const words = typingInput.value.trim().split(/\s+/).length;
            const wpm = minutes > 0 ? Math.round(words / minutes) : 0;
            
            wpmElement.textContent = wpm;
        }
        
        function handleTyping() {
            if (!isTestActive) {
                return;
            }
            
            const charSpans = textDisplay.querySelectorAll('span');
            const inputValue = typingInput.value;
            const inputArray = inputValue.split('');
            
            totalChars = inputValue.length;
            let newCorrectChars = 0;
            let allCorrect = true;
            
            charSpans.forEach((charSpan, index) => {
                const char = inputArray[index];
                
                if (char == null) {
                    charSpan.classList.remove('correct');
                    charSpan.classList.remove('incorrect');
                    charSpan.classList.remove('active');
                } else if (char === charSpan.innerText) {
                    charSpan.classList.add('correct');
                    charSpan.classList.remove('incorrect');
                    newCorrectChars++;
                } else {
                    charSpan.classList.add('incorrect');
                    charSpan.classList.remove('correct');
                    allCorrect = false;
                    
                    // Apply glitch effect on error
                    document.body.classList.add('glitch');
                    setTimeout(() => {
                        document.body.classList.remove('glitch');
                    }, 300);
                }
                
                // Highlight current character
                if (index === inputArray.length) {
                    charSpan.classList.add('active');
                } else {
                    charSpan.classList.remove('active');
                }
            });
            
            correctChars = newCorrectChars;
            errors = totalChars - correctChars;
            errorsElement.textContent = errors;
            
            // Calculate accuracy
            const accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 100;
            accuracyElement.textContent = accuracy + "%";
            
            // If user completed the text
            if (inputValue.length === charSpans.length && allCorrect) {
                endMission();
            }
        }
        
        function endMission() {
            clearInterval(timer);
            clearInterval(wpmInterval);
            typingInput.disabled = true;
            isTestActive = false;
            finishBtn.style.display = 'none'; // Hide finish button
            endTime = new Date();
            
            // Remove any warnings
            document.body.classList.remove('terminal-warning');
            timerElement.classList.remove('red-glow');
            
            const timeTaken = startTime ? (endTime - startTime) / 1000 : 0;
            const minutes = timeTaken / 60;
            const words = typingInput.value.trim().split(/\s+/).length;
            const wpm = minutes > 0 ? Math.round(words / minutes) : 0;
            const accuracy = totalChars > 0 ? Math.round((correctChars / totalChars) * 100) : 0;
            
            // Determine hacker rank
            let rank = "Script Kiddie";
            let isSuccess = false;
            
            if (wpm >= 80 && accuracy >= 98) {
                rank = "Elite Hacker";
                isSuccess = true;
            } else if (wpm >= 60 && accuracy >= 95) {
                rank = "Advanced Hacker";
                isSuccess = true;
            } else if (wpm >= 40 && accuracy >= 90) {
                rank = "Intermediate Hacker";
                isSuccess = true;
            } else if (wpm > 0) {
                rank = "Beginner Hacker";
                isSuccess = false;
            }
            
            // Update results
            wpmResult.textContent = wpm;
            accuracyResult.textContent = accuracy + "%";
            timeResult.textContent = Math.round(timeTaken) + "s";
            errorsResult.textContent = errors;
            hackerRank.textContent = rank;
            
            // Show game over screen with appropriate message
            showGameOverScreen(rank, isSuccess);
        }
        
                function showGameOverScreen(rank, isSuccess) {
            // Determine message based on success
            let message;
            if (isSuccess) {
                message = "Congratulations! Your skills are impressive. You are welcome to hack the world with us.";
                showSuccessVideo();
                
                // Apply success styles
                glitchText.classList.add('success');
                continueBtn.classList.add('success');
            } else {
                message = "You are not yet ready to join our team. But don't give up! Keep practicing and you'll become a great hacker.";
                showFailureVideo();
                
                // Remove success styles
                glitchText.classList.remove('success');
                continueBtn.classList.remove('success');
            }
            
            gameOverMessage.textContent = message;
            gameOverScreen.classList.add('active');
            glitchOverlay.classList.add('active');
            resultsScreen.classList.add('hidden');
            
            // Generate binary for game over screen
            generateBinary(gameOverBinary, Math.floor(window.innerHeight / 15));
            
            // Change binary color based on success
            if (!isSuccess) {
                gameOverBinary.style.color = "#ff3333";
            } else {
                gameOverBinary.style.color = "#33ff33";
            }
            
            // CORRECTION : Speak the message in English with a deep voice
            speakMessage(message, isSuccess);
        }
        
        function speakMessage(message, isSuccess) {
            if ('speechSynthesis' in window) {
                const speech = new SpeechSynthesisUtterance();
                speech.volume = 1;
                speech.rate = 0.7; // Slower speech
                speech.pitch = 0.02; // Deeper voice (plus bas)
                
                // Use English text
                speech.text = message;
                
                // Set language to English explicitly
                speech.lang = 'en-US';
                
                // Queue the speech to play after a delay
                setTimeout(() => {
                    // Cancel any ongoing speech
                    speechSynthesis.cancel();
                    
                    // Find an English voice
                    const voices = speechSynthesis.getVoices();
                    const englishVoice = voices.find(voice => 
                        voice.lang.includes('en') && !voice.name.includes('Google')
                    );
                    
                    if (englishVoice) {
                        speech.voice = englishVoice;
                    }
                    
                    speechSynthesis.speak(speech);
                }, 500);
            }
        }
        
        function restartMission() {
            if (currentMissionId) {
                startMission(currentMissionId);
            }
        }
        
        // Initialize first mission
        startMission(1);
    </script>
</body>
</html>